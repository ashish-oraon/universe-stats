{% extends "base.html" %}
{% block content %}
  {% if page_title %}
  <h2 class="page-title">{{ page_title }}</h2>
  {% endif %}
  <div class="universe-grid">
    {% for universe_name, rows in universe_sections %}
      <section class="universe-card">
        <div class="card-header">
          <h2>{{ universe_name }}</h2>
          <span class="count-pill">{{ rows|length }} / {{ total_counts.get(universe_name, 0) }}</span>
        </div>
        <div class="table-wrapper universe-section" data-region="{{ region }}" data-universe="{{ universe_name }}">
          <div class="table-tools">
            <input type="text" class="table-filter" placeholder="Filter tickers..." aria-label="Filter table by ticker">
          </div>
          <table class="sortable-table">
            <thead>
              <tr>
                <th data-key="symbol">Ticker <span class="sort-indicator"></span></th>
                <th data-key="price">Price <span class="sort-indicator"></span></th>
                <th data-key="sma50">SMA50 <span class="sort-indicator"></span></th>
                <th data-key="sma200">SMA200 <span class="sort-indicator"></span></th>
                <th data-key="pct_above_200dma">% > 200DMA <span class="sort-indicator"></span></th>
                <th data-key="low_52w">52W Low <span class="sort-indicator"></span></th>
                <th data-key="high_52w">52W High <span class="sort-indicator"></span></th>
                <th data-key="pct_from_52w_low">% From Low <span class="sort-indicator"></span></th>
                <th data-key="pct_from_52w_high">% From High <span class="sort-indicator"></span></th>
              </tr>
            </thead>
            <tbody class="data-body">
              <tr class="loading"><td colspan="9">Loadingâ€¦</td></tr>
            </tbody>
          </table>
        </div>
      </section>
    {% endfor %}
  </div>
{% endblock %}


